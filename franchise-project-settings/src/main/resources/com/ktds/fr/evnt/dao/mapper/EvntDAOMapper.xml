<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="Evnt">
 
 
	<insert id="createNewEvnt"
		parameterType="com.ktds.fr.evnt.vo.EvntVO">
  INSERT INTO EVNT
		(EVNT_ID
		, EVNT_TTL
		, EVNT_CNTNT
		, EVNT_STRT_DT
		, EVNT_END_DT
		, EVNT_PHT
		, USE_YN
		, DEL_YN)
		VALUES
		( #{evntId}
		, #{evntTtl}
		, #{evntCntnt}
		, TO_DATE(#{evntStrtDt})
		, TO_DATE(#{evntEndDt})
		, #{evntPht}
		, #{useYn}
		, #{delYn})
	</insert>
	
	
	<select id="readAllEvnt"
		parameterType="com.ktds.fr.evnt.vo.EvntVO"
		resultType="com.ktds.fr.evnt.vo.EvntVO">
		
	SELECT rank() OVER(ORDER BY EVNT_ID) EvntNum
		     , EVNT_ID
		     , EVNT_TTL
		     , EVNT_CNTNT
		     , EVNT_STRT_DT
		     , EVNT_END_DT
		     , EVNT_PHT
		     , USE_YN
		     , DEL_YN
		 FROM EVNT EVNT
		 WHERE 1=1
		 <if test="evntId != null and evntId != ''">
		AND EVNT.EVNT_ID LIKE '%' || #{evntId} || '%'
		 </if>
		ORDER BY EvntNum DESC
	   </select>
	
	
	<select id="readOneEvnt"
	       parameterType="com.ktds.fr.evnt.vo.EvntVO"
	       resultType="com.ktds.fr.evnt.vo.EvntVO">
     	SELECT EVNT_ID
		     , EVNT_TTL
		     , EVNT_CNTNT
		     , EVNT_STRT_DT
		     , EVNT_END_DT
		     , EVNT_PHT
		     , USE_YN
		     , DEL_YN
		  FROM EVNT EVNT
		 WHERE 1=1
		   AND EVNT_ID=#{evntId}    
	</select>
	
	<update id="updateEvnt"
		    parameterType="com.ktds.fr.evnt.vo.EvntVO">
	  UPDATE EVNT
         SET EVNT_TTL=#{evntTtl}
           , EVNT_CNTNT=#{evntCntnt}
           , EVNT_STRT_DT=TO_DATE(#{evntStrtDt})
           , EVNT_END_DT=TO_DATE(#{evntEndDt})
           , EVNT_PHT=#{evntPht}
           , USE_YN=#{useYn}
           , DEL_YN=#{delYn}
       WHERE EVNT_ID=#{evntId}
	</update>
	
	
<!-- 	  UPDATE EVNT
         SET DEL_YN=#{delYn}
       WHERE EVNT_ID=#{evntId} -->
</mapper>