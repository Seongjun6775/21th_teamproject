<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="OdrLst">
	
	
	<insert id="createNewOdrLst"
			parameterType="com.ktds.fr.odrlst.vo.OdrLstVO">
		INSERT INTO ODR_LST
		 (ODR_LST_ID
		, MBR_ID
		, ODR_LST_ODR_PRCS
		, ODR_LST_RGST_DT
		, ODR_LST_RGSTR
		, MDFY_DT
		, MDFYR
		, USE_YN
		, DEL_YN
		, STR_ID)
		VALUES
		 ('OL-' || TO_CHAR(SYSDATE, 'YYYYMMDD') || '-' || LPAD(SEQ_ODR_LST_PK.NEXTVAL, 5, '0')
		, #{mbrId}
		, #{odrLstOdrPrcs}
		, SYSDATE
		, #{odrLstRgstr}
		, SYSDATE
		, #{mdfyr}
		, 'Y'
		, 'N'
		, #{strId})
	</insert>
	
	<select id="readAllOdrLst"
			parameterType="com.ktds.fr.odrlst.vo.OdrLstVO"
			resultType="com.ktds.fr.odrlst.vo.OdrLstVO">
		<include refid="Common.pageHeader" />
		SELECT ODR_LST_ID PK_COL
		     , DENSE_RANK() OVER(ORDER BY ODR_LST_ID DESC) RNUM
		     , ODR_LST_ID
		     , MBR_ID
		     , ODR_LST_ODR_PRCS
		     , ODR_LST_RGST_DT
		     , ODR_LST_RGSTR
		     , MDFY_DT
		     , MDFYR
		     , USE_YN
		     , DEL_YN
		     , STR_ID
		  FROM ODR_LST
		<include refid="Common.pageFooter" />
	</select>
	
	<select id="readAllMyOdrLst"
			parameterType="com.ktds.fr.odrlst.vo.OdrLstVO"
			resultType="com.ktds.fr.odrlst.vo.OdrLstVO">
		<include refid="Common.pageHeader" />
		SELECT ODR_LST_ID PK_COL
		     , DENSE_RANK() OVER(ORDER BY ODR_LST_ID DESC) RNUM
		     , ODR_LST_ID
		     , MBR_ID
		     , ODR_LST_ODR_PRCS
		     , ODR_LST_RGST_DT
		     , ODR_LST_RGSTR
		     , MDFY_DT
		     , MDFYR
		     , USE_YN
		     , DEL_YN
		     , STR_ID
		  FROM ODR_LST
		 WHERE MBR_ID = #{mbrId}
		<include refid="Common.pageFooter" />
	</select>
	
	<select id="readOneOdrLstByOdrLstId"
			parameterType="string"
			resultType="com.ktds.fr.odrlst.vo.OdrLstVO">
		SELECT ODR_LST_ID
		     , MBR_ID
		     , ODR_LST_ODR_PRCS
		     , ODR_LST_RGST_DT
		     , ODR_LST_RGSTR
		     , MDFY_DT
		     , MDFYR
		     , USE_YN
		     , DEL_YN
		     , STR_ID
		  FROM FRAN.ODR_LST
		 WHERE ODR_LST_ID = #{_parameter}
	</select>
	
	<update id="updateOneOdrLstByOdrLstId"
			parameterType="com.ktds.fr.odrlst.vo.OdrLstVO">
		UPDATE ODR_LST
		   SET ODR_LST_ODR_PRCS = #{odrLstOdrPrcs}
		     , MDFY_DT = SYSDATE
		     , MDFYR = #{mdfyr}
		 WHERE ODR_LST_ID = #{odrLstId}
	</update>
	
	<update id="deleteOneOdrLstByOdrLstId"
			parameterType="com.ktds.fr.odrlst.vo.OdrLstVO">
		UPDATE ODR_LST
		   SET DEL_YN = 'Y'
		     , MDFY_DT = SYSDATE
		     , MDFYR = #{mdfyr}
		 WHERE ODR_LST_ID = #{odrLstId}
	</update>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	



</mapper>
